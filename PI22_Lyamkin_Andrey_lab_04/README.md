# Лабораторная работа № 4
## Выплнил студент гр. ПИбд-22 Лямкин Андрей

### Задание:
* Добавить таблицу с пользователями
* Добавить запрос для регистрации
* Добавить запрос для авторизации, запрос должен возвращать токен (срок жизни токена - 1 неделя) для доступа к запросам редактирования информации
* Ограничить доступ к запросам редактирования информации (создания, редактирования и удаления записей в бд). Возвращать 401 статус код отказе в доступе.
### Запуск сервера
Чтобы запустить сервер необходимо ввести команду node index в терминале. При этом должны быть установлены модули, указанные в разделе dependencies файла packege.json.

### Запросы
В рамках лабораторной работы были реализованы следующие запросы:
1. POST /register - создание нового пользователя. Необходимо ввести логин (login) и пароль (pass). Поле логин должно быть уникальным, то есть если в системе уже есть пользователь с таким логином, регистрация не произойдет

2. GET /login - авторизация. Необходимо ввести логин (login) и пароль (pass). Если пользователь зарегестрированн в системе, то вернет токен, иначе ошибку.

### Особенности
1. Неавторизовавшимся пользователям запрещено вносить изменения в БД.
Для этого была написана middlware функция authorisationCheck, проверяющая токен на подленность.
2. Вспомогательная функция getUserByLogin модуля user.model.js является ассинхронной (async). 
Она производит запрос к БД для получения пользователя по логину. Чтобы функции register и login сначала
ожидали результат getUserByLogin, а потом уже работали, getUserByLogin является async и вызывается через await.
####Видео: https://disk.yandex.ru/i/JR1ECvkNvsuJgg